# Chrome DevTools 網頁下載外掛

這是一個專為處理 Cloudflare 保護網站設計的 Chrome DevTools 擴充功能，能夠批量下載網頁內容並轉換為 Markdown 格式。

## 主要功能

- 從輸入框中讀取網址清單，每行一個網址
- 支持處理非標準網址格式，自動添加 https:// 前綴
- 自動移除網址中的錨點（# 後面的部分）
- 可調整網頁抓取的時間間隔（最小延遲和最大延遲）
- 在控制台輸出區域顯示網址抓取的 HTTP 狀態碼與網址
- 將抓取的 HTML 內容轉換為 Markdown 格式
- 將所有內容整合為 XML 格式並下載

## 安裝方式

1. 下載或克隆此專案
2. 打開 Chrome 瀏覽器，進入 `chrome://extensions/`
3. 開啟右上角的「開發者模式」
4. 點擊「載入未封裝項目」按鈕
5. 選擇此專案的根目錄

## 使用方法

1. 打開 Chrome DevTools（按 F12 或右鍵點擊網頁選擇「檢查」）
2. 在 DevTools 頂部找到「網頁下載器」標籤
3. 在文本框中輸入要下載的網址清單（每行一個網址）
4. 調整最小和最大延遲時間（秒）
5. 點擊「開始下載」按鈕
6. 等待處理完成，XML 文件會自動下載

## 特色功能

### HTTP 狀態碼過濾

- 只收錄 HTTP 狀態碼為 200 的頁面（成功狀態）
- 允許 301、302 等重定向狀態碼（3xx 系列）
- 不收錄 404（頁面不存在）或 429（請求過多）等錯誤狀態碼

### HTML 轉 Markdown

- 使用 Turndown 庫將 HTML 內容轉換為 Markdown 格式
- 標題樣式：atx (## 標題)
- 水平線：---
- 無序列表標記：-
- 代碼塊樣式：fenced (```代碼```)
- 斜體分隔符：*

### 單一分頁處理

- 使用單一分頁訪問所有網址，而不是為每個網址創建新分頁
- 工作流程：
  - 首先創建一個空白分頁 (about:blank)
  - 在這個分頁中依次導航到每個需要處理的網址
  - 處理完所有網址後才關閉分頁

## 開發文檔

如果您想了解更多關於此專案的技術細節和開發指南，請查看我們的 [開發指南](./howto.md)。

開發指南包含：
- 專案架構詳解
- 關鍵技術說明
- 排程訪問實作
- 常見問題與解決方案
- 除錯技巧
- 效能優化建議

## 注意事項

- 此擴充功能設計用於合法、授權的網頁內容獲取
- 請尊重網站的 robots.txt 規則和使用條款
- 不建議設置過短的延遲時間，以避免對目標網站造成過大負擔
- 考慮到 Cloudflare 保護，本擴充功能採用逐頁下載方式，不支持背景運行

## 授權

MIT 授權
